<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izskaties DzirdÄ“ts | ViktorÄ«nas ar JÄni ZaÄu</title>
<meta name="description" content="ProfesionÄlas viktorÄ«nas privÄtiem un korporatÄ«viem pasÄkumiem. 14+ gadu pieredze erudÄ«cijas spÄ“lÄ“s.">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Merriweather:wght@300;400;700&family=Oswald:wght@400;600&display=swap" rel="stylesheet">

<!-- React & ReactDOM -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function(){ emailjs.init("YHTsjioMXMQ917e10"); })();
</script>

<style>
  :root {
    --primary: #E63946;
    --secondary: #F1FAEE;
    --dark: #1D3557;
    --accent: #FFD93D;
    --text: #2B2D42;
    --light-gray: #EDF2F4;
    --success: #06D6A0;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Merriweather', serif; color: var(--text); line-height: 1.6; background: var(--secondary); overflow-x: hidden; }
  html { scroll-behavior: smooth; }

  /* Hero */
  .hero { position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--dark) 0%, #457B9D 100%); padding: 2rem; }
  .hero-content { position: relative; z-index: 2; text-align: center; max-width: 900px; }
  .brand-logo { font-family: 'Bebas Neue', sans-serif; font-size: clamp(3rem, 10vw, 7rem); color: white; letter-spacing: 2px; margin-bottom: 1rem; text-shadow: 4px 4px 0 var(--primary); }
  .tagline { font-size: clamp(1.2rem, 3vw, 1.8rem); color: var(--accent); font-weight: 300; margin-bottom: 2rem; }
  .hero-description { color: var(--secondary); font-size: 1.1rem; margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto; }
  .cta-button { display: inline-block; padding: 1.2rem 3rem; background: var(--primary); color: white; text-decoration: none; font-family: 'Oswald', sans-serif; font-size: 1.3rem; letter-spacing: 1px; border: none; cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; position: relative; overflow: hidden; }
  .cta-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: rgba(255,255,255,0.2); transition: left 0.5s ease; }
  .cta-button:hover::before { left: 100%; }
  .cta-button:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(230,57,70,0.4); }

  /* Sections */
  section { padding: 5rem 2rem; max-width: 1200px; margin: 0 auto; }
  .section-title { font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.5rem, 6vw, 4rem); color: var(--dark); margin-bottom: 1rem; position: relative; display: inline-block; }
  .section-title::after { content: ''; position: absolute; bottom: -10px; left: 0; width: 60%; height: 4px; background: var(--primary); }

  /* Services */
  .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-top: 3rem; }
  .service-card { background: white; padding: 2.5rem 2rem; border-left: 6px solid var(--primary); transition: all 0.3s ease; position: relative; }
  .service-card:hover { transform: translateX(10px); box-shadow: -10px 10px 30px rgba(0,0,0,0.1); }
  .service-icon { font-size: 3rem; margin-bottom: 1rem; }
  .service-title { font-family: 'Oswald', sans-serif; font-size: 1.8rem; color: var(--dark); margin-bottom: 1rem; }
  .service-description { color: #666; line-height: 1.8; }

  /* Booking & Form */
  .booking-section { background: white; padding: 5rem 2rem; }
  .booking-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; margin-top: 3rem; }
  .calendar-wrapper, .booking-form-wrapper { background: white; padding: 2.5rem; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
  .booking-form-wrapper { position: sticky; top: 2rem; max-height: calc(100vh - 4rem); overflow-y: auto; }
  .calendar-grid { display: grid; grid-template-columns: repeat(7,1fr); gap: 0.5rem; }
  .calendar-day-header { text-align:center; font-family:'Oswald',sans-serif; color:var(--dark); padding:1rem 0; font-size:0.9rem; }
  .calendar-day { aspect-ratio:1; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid var(--light-gray); cursor:pointer; border-radius:5px; position:relative; transition: all 0.3s; }
  .calendar-day.available { border-color: var(--success); background: rgba(6,214,160,0.1); }
  .calendar-day.selected { background: var(--primary); color:white; border-color: var(--primary); }
  .calendar-day.past, .calendar-day.disabled { opacity:0.3; cursor:not-allowed; }
  .day-number { font-weight:bold; font-size:1.1rem; }
  .availability-dots { display:flex; gap:3px; margin-top:5px; }
  .host-dot { width:6px; height:6px; border-radius:50%; background: var(--success); }
  .host-dot.booked { background: var(--primary); }

  .form-group { margin-bottom:1.5rem; }
  .form-label { display:block; font-family:'Oswald',sans-serif; color:var(--dark); margin-bottom:0.5rem; font-size:1.1rem; }
  .form-input, .form-select, .form-textarea { width:100%; padding:0.8rem; border:2px solid var(--light-gray); border-radius:5px; font-family:'Merriweather',serif; font-size:1rem; transition:border-color 0.3s; }
  .form-input:focus, .form-select:focus, .form-textarea:focus { outline:none; border-color:var(--primary); }
  .form-textarea { min-height:100px; resize:vertical; }
  .submit-btn { width:100%; padding:1.2rem; background:var(--primary); color:white; border:none; border-radius:5px; font-family:'Oswald',sans-serif; font-size:1.3rem; cursor:pointer; transition: all 0.3s; text-transform:uppercase; letter-spacing:1px; }
  .submit-btn:hover:not(:disabled) { background:var(--dark); transform: translateY(-3px); box-shadow:0 5px 15px rgba(230,57,70,0.3); }
  .submit-btn:disabled { opacity:0.5; cursor:not-allowed; }
  .loading-spinner { display:inline-block; width:20px;height:20px;border:3px solid white;border-top-color:transparent;border-radius:50%;animation:spin 0.8s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Contact */
  .contact-section { background: var(--light-gray); }
  .contact-grid { display: grid; grid-template-columns:1fr 1fr; gap:4rem; margin-top:3rem; }
  .contact-info { display:flex; flex-direction:column; gap:2rem; }
  .contact-item { display:flex; align-items:flex-start; gap:1.5rem; }
  .contact-icon { font-size:2rem; color: var(--primary); margin-top:0.2rem; }
  .contact-details h3 { font-family:'Oswald',sans-serif; font-size:1.5rem; color: var(--dark); margin-bottom:0.5rem; }
  .contact-details p, .contact-details a { color:#666; text-decoration:none; }
  .contact-details a:hover { color:var(--dark); }

  /* Footer */
  footer { background: var(--dark); color: var(--secondary); text-align:center; padding:3rem 2rem; }
  .social-links { display:flex; gap:2rem; justify-content:center; margin-bottom:2rem; }
  .social-links a { color: var(--secondary); font-size:2rem; text-decoration:none; transition: all 0.3s; }
  .social-links a:hover { color: var(--accent); transform:translateY(-5px); }

  /* Responsive */
  @media(max-width:1024px){.booking-grid{grid-template-columns:1fr}.booking-form-wrapper{position:static;max-height:none}}
  @media(max-width:768px){.contact-grid{grid-template-columns:1fr;gap:2rem}section{padding:3rem 1.5rem}}
</style>
</head>

<body>
<!-- Hero -->
<section class="hero">
  <div class="hero-content">
    <h1 class="brand-logo">IZSKATIES DZIRDÄ’TS</h1>
    <p class="tagline">ViktorÄ«nas ar raksturu</p>
    <p class="hero-description">
      ProfesionÄlas, aizraujoÅ¡as viktorÄ«nas privÄtiem un korporatÄ«viem pasÄkumiem. 14+ gadu pieredze erudÄ«cijas spÄ“Ä¼u vadÄ«Å¡anÄ LatvijÄ.
    </p>
    <a href="#booking" class="cta-button">RezervÄ“t viktorÄ«nu</a>
  </div>
</section>

<!-- Services -->
<section id="services">
  <h2 class="section-title">Ko piedÄvÄju</h2>
  <div class="services-grid">
    <div class="service-card"><div class="service-icon">ğŸ¢</div><h3 class="service-title">KorporatÄ«vie pasÄkumi</h3><p class="service-description">PielÄgotas viktorÄ«nas komandas saliedÄ“Å¡anai, gada svÄ“tkiem vai klienta pasÄkumiem. ProfesionÄla tehnika, savs skaÅ†as aprÄ«kojums.</p></div>
    <div class="service-card"><div class="service-icon">ğŸ‰</div><h3 class="service-title">PrivÄtie pasÄkumi</h3><p class="service-description">DzimÅ¡anas dienas, ballÄ«tes, Ä£imenes pasÄkumi. RadÄ«Å¡u neaizmirstamu vakaru ar jautÄjumiem, kas pielÄgoti tieÅ¡i JÅ«su auditorijai.</p></div>
    <div class="service-card"><div class="service-icon">ğŸº</div><h3 class="service-title">PubliskÄs viktorÄ«nas</h3><p class="service-description">RegulÄras viktorÄ«nas bÄros un kafejnÄ«cÄs. Viens no pirmajiem, kas sÄka erudÄ«cijas spÄ“Ä¼u kustÄ«bu LatvijÄ.</p></div>
    <div class="service-card"><div class="service-icon">ğŸµ</div><h3 class="service-title">Tematiskas spÄ“les</h3><p class="service-description">MÅ«zikas viktorÄ«nas, popkultÅ«ras kvÄ«zi, vÄ“stures maratoni - izvÄ“lieties tÄ“mu vai Ä¼aujiet man pÄrsteigt ar universÄlu formÄtu.</p></div>
  </div>
</section>

<!-- Booking Section -->
<section class="booking-section" id="booking">
  <div class="booking-container">
    <h2 class="section-title">RezervÄ“t viktorÄ«nu</h2>
    <div id="booking-app"></div>
  </div>
</section>

<!-- Contact Section -->
<section class="contact-section" id="contact">
  <h2 class="section-title">SazinÄties</h2>
  <div class="contact-grid">
    <div class="contact-info">
      <div class="contact-item"><div class="contact-icon">ğŸ“§</div><div class="contact-details"><h3>E-pasts</h3><p><a href="mailto:janiszacs@gmail.com">janiszacs@gmail.com</a></p></div></div>
      <div class="contact-item"><div class="contact-icon">ğŸ“±</div><div class="contact-details"><h3>Telefons</h3><p><a href="tel:+37125555224">+371 25555224</a></p></div></div>
      <div class="contact-item"><div class="contact-icon">ğŸ’¬</div><div class="contact-details"><h3>SociÄlie tÄ«kli</h3><p><a href="#" target="_blank">Facebook</a> | <a href="#" target="_blank">Instagram</a></p></div></div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer>
  <div style="max-width:1200px;margin:0 auto;">
    <div class="social-links">
      <a href="#" aria-label="Facebook">ğŸ“˜</a>
      <a href="#" aria-label="Instagram">ğŸ“·</a>
      <a href="mailto:janis@izskatiesdzirdets.lv" aria-label="E-pasts">ğŸ“§</a>
    </div>
    <p style="font-family:'Oswald',sans-serif;font-size:1.5rem;margin-bottom:1rem;">IZSKATIES DZIRDÄ’TS</p>
    <p style="opacity:0.7;font-size:0.9rem;">&copy; 2026 JÄnis ZaÄs. ViktorÄ«nas ar dvÄ“seli un pieredzi.</p>
  </div>
</footer>

<!-- React Booking Component -->
<script type="text/babel">
const { useState, useEffect } = React;

// Supabase setup
const SUPABASE_URL = 'https://ibnvqljclchzlbvfwugj.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const CONFIG = {
  hosts: [{ id:1,name:'JÄnis ZaÄs',email:'janiszacs@gmail.com'},{id:2,name:'Lielisks vadÄ«tÄjs 2',email:'janiszacs@gmail.com'}],
  minAdvanceBooking:2,
  maxAdvanceBooking:90
};

function BookingApp() {
  const [currentDate,setCurrentDate]=useState(new Date());
  const [selectedDate,setSelectedDate]=useState(null);
  const [selectedHost,setSelectedHost]=useState(null);
  const [bookings,setBookings]=useState([]);
  const [loading,setLoading]=useState(true);
  const [formData,setFormData]=useState({name:'',email:'',phone:'',eventType:'corporate',guests:30,notes:''});
  const [isSubmitting,setIsSubmitting]=useState(false);
  const [submitSuccess,setSubmitSuccess]=useState(false);
  const [error,setError]=useState(null);
  const [aiRecommendation,setAiRecommendation]=useState('');

  useEffect(()=>{loadBookings();},[]);

  const loadBookings=async()=>{
    try{
      const {data,error}=await supabase.from('bookings').select('booking_date,host_id');
      if(error) throw error;
      setBookings(data||[]);
      setLoading(false);
    }catch(err){console.error(err);setLoading(false);}
  };

  const getBookedHosts=dateStr=>bookings.filter(b=>b.booking_date===dateStr).map(b=>b.host_id);
  const isDateAvailable=dateStr=>{
    const date=new Date(dateStr); const today=new Date(); today.setHours(0,0,0,0);
    if(date<today) return false;
    const minDate=new Date(today); minDate.setDate(minDate.getDate()+CONFIG.minAdvanceBooking);
    if(date<minDate) return false;
    const maxDate=new Date(today); maxDate.setDate(maxDate.getDate()+CONFIG.maxAdvanceBooking);
    if(date>maxDate) return false;
    return true;
  };

  const handleDayClick=dateStr=>{
    if(!isDateAvailable(dateStr)) return;
    setSelectedDate(dateStr);
  };

  const handleFormChange=e=>{
    const {name,value}=e.target;
    setFormData(prev=>({...prev,[name]:value}));
  };

  const handleSubmit=async e=>{
    e.preventDefault();
    if(!selectedDate || !selectedHost) { alert('IzvÄ“lies datumu un vadÄ«tÄju'); return; }
    setIsSubmitting(true); setError(null);
    try{
      // Supabase insert
      const {data,error}=await supabase.from('bookings').insert([{booking_date:selectedDate,host_id:selectedHost,...formData}]);
      if(error) throw error;
      // EmailJS send
      await emailjs.send('service_id','template_id',{...formData,date:selectedDate,host:CONFIG.hosts.find(h=>h.id==selectedHost).name});
      setSubmitSuccess(true);
      setFormData({name:'',email:'',phone:'',eventType:'corporate',guests:30,notes:''});
      setSelectedDate(null); setSelectedHost(null); loadBookings();
    }catch(err){console.error(err); setError('RadÄs problÄ“ma. MÄ“Ä£ini vÄ“lreiz.');}
    setIsSubmitting(false);
  };

  const renderCalendar=()=>{
    const start=new Date(currentDate.getFullYear(),currentDate.getMonth(),1);
    const end=new Date(currentDate.getFullYear(),currentDate.getMonth()+1,0);
    const days=[];
    for(let i=1;i<=end.getDate();i++){
      const day=new Date(currentDate.getFullYear(),currentDate.getMonth(),i);
      const dayStr=day.toISOString().split('T')[0];
      const bookedHosts=getBookedHosts(dayStr);
      const dayClass=isDateAvailable(dayStr)?'available':'disabled';
      days.push(
        <div key={i} className={`calendar-day ${dayClass} ${selectedDate===dayStr?'selected':''}`} onClick={()=>handleDayClick(dayStr)}>
          <div className="day-number">{i}</div>
          <div className="availability-dots">
            {CONFIG.hosts.map(h=><span key={h.id} className={`host-dot ${bookedHosts.includes(h.id)?'booked':''}`}></span>)}
          </div>
        </div>
      );
    }
    const headers=['P','O','T','C','Pk','S','Sv'].map(d=><div key={d} className="calendar-day-header">{d}</div>);
    return <div className="calendar-wrapper"><div className="calendar-grid">{headers.concat(days)}</div></div>;
  };

  return (
    <div className="booking-grid">
      {renderCalendar()}
      <div className="booking-form-wrapper">
        {submitSuccess?<p style={{color:'green',fontWeight:'bold'}}>RezervÄcija veiksmÄ«gi nosÅ«tÄ«ta!</p>:null}
        {error?<p style={{color:'red'}}>{error}</p>:null}
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label className="form-label">IzvÄ“lies vadÄ«tÄju</label>
            <select name="host" className="form-select" value={selectedHost||''} onChange={e=>setSelectedHost(Number(e.target.value))} required>
              <option value="">-- izvÄ“lies --</option>
              {CONFIG.hosts.map(h=><option key={h.id} value={h.id}>{h.name}</option>)}
            </select>
          </div>
          <div className="form-group">
            <label className="form-label">VÄrds un uzvÄrds</label>
            <input type="text" name="name" className="form-input" value={formData.name} onChange={handleFormChange} required/>
          </div>
          <div className="form-group">
            <label className="form-label">E-pasts</label>
            <input type="email" name="email" className="form-input" value={formData.email} onChange={handleFormChange} required/>
          </div>
          <div className="form-group">
            <label className="form-label">Telefons</label>
            <input type="tel" name="phone" className="form-input" value={formData.phone} onChange={handleFormChange} required/>
          </div>
          <div className="form-group">
            <label className="form-label">PasÄkuma veids</label>
            <select name="eventType" className="form-select" value={formData.eventType} onChange={handleFormChange}>
              <option value="corporate">KorporatÄ«vais</option>
              <option value="private">PrivÄtais</option>
              <option value="public">Publiskais</option>
            </select>
          </div>
          <div className="form-group">
            <label className="form-label">CilvÄ“ku skaits</label>
            <input type="number" name="guests" className="form-input" min="1" value={formData.guests} onChange={handleFormChange} required/>
          </div>
          <div className="form-group">
            <label className="form-label">PiezÄ«mes</label>
            <textarea name="notes" className="form-textarea" value={formData.notes} onChange={handleFormChange}></textarea>
          </div>
          <button type="submit" className="submit-btn" disabled={isSubmitting}>
            {isSubmitting?<span className="loading-spinner"></span>:'RezervÄ“t'}
          </button>
        </form>
      </div>
    </div>
  );
}

ReactDOM.render(<BookingApp/>, document.getElementById('booking-app'));
</script>
</body>
</html>
